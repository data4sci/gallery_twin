{% extends "base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto">
    <h1 class="text-3xl font-bold mb-6">Admin Dashboard</h1>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        <div class="bg-white p-6 rounded-lg shadow text-center">
            <div class="text-3xl font-bold mb-2">{{ kpis.sessions_count }}</div>
            <div class="text-gray-500">Počet návštěv</div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow text-center">
            <div class="text-3xl font-bold mb-2">{{ (kpis.completion_rate * 100) | round(2) }}%</div>
            <div class="text-gray-500">Completion Rate</div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow text-center">
            <div class="text-3xl font-bold mb-2">
                {% if kpis.average_time != "N/A" %}
                    {{ kpis.average_time }} s
                {% else %}
                    N/A
                {% endif %}
            </div>
            <div class="text-gray-500">Průměrný čas na exhibit (s)</div>
        </div>
    </div>

    <div class="bg-white p-6 rounded-lg shadow mb-8">
        <h2 class="text-xl font-bold mb-4">Sebeevaluační statistiky</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            {% for key, stat in selfeval_stats.items() if key not in ['total_selfeval', 'avg_age', 'median_age'] %}
            <div>
                <div class="font-semibold mb-2">{{ key|capitalize }}</div>
                <ul>
                    {% for value, count in stat.items() %}
                    <li>{{ value }}: {{ count }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endfor %}
            <div>
                <div class="font-semibold mb-2">Věk</div>
                <ul>
                    <li>Průměr: {{ selfeval_stats.avg_age or "N/A" }}</li>
                    <li>Medián: {{ selfeval_stats.median_age or "N/A" }}</li>
                </ul>
            </div>
        </div>
        <div class="mt-4 text-gray-500 text-sm">
            Celkem vyplněno: {{ selfeval_stats.total_selfeval }}
        </div>
    </div>

    <div>
        <a href="{{ url_for('admin_responses') }}" class="text-blue-500 hover:underline">Zobrazit všechny odpovědi &raquo;</a>
    </div>
</div>
{% endblock %}
